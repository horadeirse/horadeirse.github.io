<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Clemente's Clock ðŸŽ‰</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    .clock {
      font-size: 10rem;
      background: rgba(255, 255, 255, 0.1);
      padding: 40px 80px;
      border-radius: 30px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
      margin-bottom: 20px;
    }

    .countdown {
      font-size: 2rem;
      margin-bottom: 10px;
      color: #ccc;
    }

    .message {
      font-size: 3rem;
      margin-top: 30px;
      opacity: 0;
      transition: opacity 1s;
    }

    .message.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="clock" id="clock">--:--:--</div>
  <div class="countdown" id="countdown">Calculando tiempo restante...</div>
  <div class="message" id="message">ðŸŽ‰ Â¡Hora de irse! ðŸŽ‰</div>

  <script>
    const clockEl = document.getElementById("clock");
    const countdownEl = document.getElementById("countdown");
    const messageEl = document.getElementById("message");

    const targetHour = 13;
    const targetMinute = 39;
    const targetSecond = 50;

    let confettiActive = false;

    function updateClock() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2, '0');
      const m = String(now.getMinutes()).padStart(2, '0');
      const s = String(now.getSeconds()).padStart(2, '0');
      clockEl.textContent = `${h}:${m}:${s}`;

      updateCountdown(now);

      if (
        now.getHours() === targetHour &&
        now.getMinutes() === targetMinute &&
        now.getSeconds() === targetSecond &&
        !confettiActive
      ) {
        confettiActive = true;
        showMessage();
        launchConfetti();
      }
    }

    function updateCountdown(now) {
      const target = new Date();
      target.setHours(targetHour, targetMinute, targetSecond, 0);
      if (now > target) {
        target.setDate(target.getDate() + 1); // siguiente dÃ­a
      }
      const diff = target - now;

      const hours = String(Math.floor(diff / 1000 / 60 / 60)).padStart(2, '0');
      const minutes = String(Math.floor((diff / 1000 / 60) % 60)).padStart(2, '0');
      const seconds = String(Math.floor((diff / 1000) % 60)).padStart(2, '0');

      countdownEl.textContent = `Faltan ${hours}:${minutes}:${seconds} para la hora mÃ¡gica`;
    }

    function showMessage() {
      messageEl.classList.add("show");
      setTimeout(() => {
        messageEl.classList.remove("show");
        confettiActive = false;
      }, 10000); // quitar despuÃ©s de 10s
    }

    function launchConfetti() {
      const duration = 10 * 1000;
      const end = Date.now() + duration;

      (function frame() {
        confetti({
          particleCount: 5,
          angle: 60,
          spread: 55,
          origin: { x: 0 },
        });
        confetti({
          particleCount: 5,
          angle: 120,
          spread: 55,
          origin: { x: 1 },
        });

        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      })();
    }

    setInterval(updateClock, 1000);
    updateClock();
  </script>
</body>
</html>
